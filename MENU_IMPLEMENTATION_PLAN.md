# План реализации задачи 6: Меню и навигация

## Анализ текущего состояния

✅ **Уже готово:**

- Модели `Menu` и `MenuItem` с правильной структурой
- Миграция `2025_12_26_105000_create_navigation_tables.php`
- Базовая связь parent-child для вложенности

❌ **Отсутствует:**

- Orchid Screens для управления меню
- Пункты меню в PlatformProvider
- Маршруты публичной части
- Хлебные крошки
- Права доступа в Rbac
- Сидеры для базовых меню

## План реализации

### Шаг 1: Добавить права доступа в Rbac

- Добавить константы для прав доступа к меню
- Обновить матрицу прав

### Шаг 2: Создать Orchid Screens для меню

- `MenuListScreen.php` - список меню с переключением header/footer
- `MenuEditScreen.php` - создание/редактирование меню и элементов
- Вложенное управление элементами меню с drag&drop

### Шаг 3: Обновить PlatformProvider

- Добавить пункт "Меню" в основное меню
- Настроить права доступа

### Шаг 4: Настроить маршруты platform.php

- Маршруты для CRUD операций меню
- Маршруты для публичной части сайта

### Шаг 5: Создать сервис хлебных крошек

- `BreadcrumbService.php`
- Методы генерации крошек для разных типов страниц

### Шаг 6: Создать сидеры

- `MenuSeeder.php` - создание базовых header/footer меню
- Начальные элементы меню (Главная, О компании, Услуги, etc.)

### Шаг 7: Создать представления для публичной части

- Компоненты меню header/footer
- Хлебные крошки для страниц

## Детализация структуры URL (согласно ТЗ)

```
Главная: /
Продукция: /products
  - Категория: /products/{category_slug}
  - Товар: /products/{category_slug}/{product_slug}
Услуги: /services
  - Услуга: /services/{service_slug}
Портфолио: /portfolio
  - Кейс: /portfolio/{case_slug}
Новости: /news
  - Новость: /news/{news_slug}
Статические страницы: /{page_slug}
Поиск: /search
```

## Технические детали

### MenuItem fields

- `entity_type` - тип связанной сущности (Product, Service, Page, etc.)
- `entity_id` - ID сущности
- `url` - кастомная ссылка (если нет привязки к сущности)

### Хлебные крошки

- Автоматическая генерация на основе текущего URL
- Поддержка кастомных крошек для статических страниц
- Интеграция с SEO-шаблонами
