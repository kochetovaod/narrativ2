# План завершения задачи №4: Контентные модули (CRUD + связи)

## Анализ текущего состояния

### ✅ Что уже выполнено

1. **Модели**: Все основные модели созданы (ProductCategory, Product, Service, PortfolioCase, NewsPost, Page)
2. **Миграции**: Все таблицы созданы с правильной структурой
3. **Фабрики**: Созданы для всех модулей
4. **Orchid Screens**: Списки и редактирование для всех модулей
5. **Маршруты**: Зарегистрированы в routes/platform.php
6. **Связи many-to-many**: Product ↔ PortfolioCase, Service ↔ PortfolioCase
7. **SEO**: Все модели используют общие traits (HasSeo, HasSlugRedirects)
8. **Статусы публикации**: Реализованы через HasPublicationStatus
9. **Предпросмотр**: Поддерживается через preview_token
10. **Аудит**: Записи действий через RecordsAdminAudit
11. **Медиа**: Все модели связаны с MediaLink

### ❌ Что нужно доработать

#### 1. Фильтры и поиск

- [ ] Проверить StatusFilter для всех модулей
- [ ] Создать дополнительные фильтры для поиска
- [ ] Реализовать полнотекстовый поиск

#### 2. Товары - расширить функциональность

- [ ] Добавить поле для связанных товаров (похожие)
- [ ] Доработать характеристики key→value
- [ ] Реализовать автоподбор "Похожие/С этим заказывают"

#### 3. Услуги - проверить связи

- [ ] Убедиться что связи с кейсами работают корректно
- [ ] Добавить блок "Другие услуги" (по связям/фильтру)

#### 4. Портфолио (кейсы) - проверить связи

- [ ] Убедиться что связи товары↔кейсы работают
- [ ] Убедиться что связи услуги↔кейсы работают  
- [ ] Добавить блок "Другие кейсы" (по связям/фильтру)

#### 5. Новости - базовая функциональность

- [ ] Проверить поля: анонс (excerpt), дата (published_at), контент
- [ ] Убедиться что медиа загружаются

#### 6. Статические страницы - проверить функциональность

- [ ] Проверить специальные страницы (Контакты, Производственные возможности и т.д.)
- [ ] Убедиться что SEO работает

#### 7. Интеграция с медиа

- [ ] Проверить загрузку изображений через MediaLink
- [ ] Убедиться что галереи работают

#### 8. Тестирование функциональности

- [ ] Проверить создание/редактирование/удаление всех модулей
- [ ] Проверить связи между модулями
- [ ] Проверить SEO поля и автогенерацию
- [ ] Проверить статусы публикации
- [ ] Проверить предпросмотр

## Следующие шаги

1. **Проверить и дополнить фильтры** для всех модулей
2. **Протестировать создание записей** в каждом модуле
3. **Проверить связи many-to-many** между модулями
4. **Дополнить недостающую функциональность** где необходимо
5. **Проверить интеграцию с медиа**
6. **Обновить TODO.md** - отметить выполненные пункты

## Критерии готовности

- [ ] Все 6 модулей (Категории, Товары, Услуги, Кейсы, Новости, Страницы) имеют полный CRUD
- [ ] Фильтры и поиск работают на всех страницах списков
- [ ] Связи many-to-many функционируют корректно
- [ ] SEO поля сохраняются и отображаются
- [ ] Статусы публикации работают
- [ ] Предпросмотр функционирует
- [ ] Медиа загружаются и отображаются
- [ ] Нет ошибок в логах при работе с модулями
