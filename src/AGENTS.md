# AGENTS — Laravel приложение (`src/`)

Инструкции относятся ко всему внутри `src/`.

## Архитектура и структура
- Базовая логика: контроллеры в `app/Http/Controllers`, сервисы — в `app/Services`, модели — в `app/Models`. Не раздувай контроллеры; бизнес-логику держи в сервисах/моделях.
- Админка/панели собираются на Orchid (`app/Orchid/**`). Новые экраны и компоненты пиши как отдельные Screen/Layouts-классы, регистрируй маршруты в `routes/platform.php`.
- Маршруты фронта — `routes/web.php`, консоль — `routes/console.php`. Избегай тяжелой логики прямо в маршрутах.
- Представления и ассеты: Blade-шаблоны в `resources/views`, стили в `resources/css`, JS в `resources/js`. Используй Vite для подключений.

## Код-стайл и инструменты
- PHP: придерживайся PSR-12/Laravel-стиля, форматируй `./vendor/bin/pint`.
- Тесты: `php artisan test` (или `./vendor/bin/phpunit`). В докер-среде предпочитай `ENV=test make test` из корня.
- Если добавляешь env-переменные, обновляй `src/.env.example` и `src/.env.testing.example`.
- При работе с Eloquent используй строгую типизацию, массовое назначение через `$fillable`/`$guarded`, а для генерации данных — фабрики из `database/factories`.
- Для миграций, сидов и очередей используй artisan-команды (`php artisan migrate`, `queue:work` и т.д.) через контейнер `php-fpm` или `make artisan cmd="..."`.
- JS/стили: следи за соответствием путей в `vite.config.js`; после крупных изменений прогоняй `npm run build`.

## Проверки безопасности и данных
- Не хранить чувствительные данные в репозитории; любые секреты только через `.env` и инфраструктуру.
- При добавлении загрузки файлов опирайся на spatie/medialibrary и проверяй лимиты дисков/очередей (`MEDIA_*` в .env).

## Документация к изменениям
- Новые команды/фичи описывай в README или профильных доках, если они влияют на запуск или сопровождение.
- Комментарии в коде пишите на русском, если нет веской причины для английского.
